# 注《如何构建一个生产就绪的RAG系统》

文章作者是我的开发者朋友。首先点赞这篇文章逻辑清晰、条理严谨的思路。这篇文章主要补充一些自己的延伸思考。
领域划分
在量潮的标准化体系中，我们把文章中提到的“数据处理、检索、生成”划分为“数据工程”、“搜索工程”、“智能体工程”三个领域，以及正文没有提到但是作者实际上在做的“知识工程”领域。
正确地划分领域意味着准确地定义问题范围，这样便可以参考合适的前人工作继续升级。这是复杂软件工程最容易被忽视的问题，没有之一。文章正确地定位了“搜索工程”的问题领域，所以能够在生产上可以取得很好的效果。
数据工程
洗数据这种天坑谁干了谁知道，全是脏活累活。要保证准确率真的非常非常不容易。如果想要提高洗数据的质量，就要拼命堆人堆工具，投入产出比有时候还不是那么确定。
元数据很重要。无论是对搜索工程，还是对数据工程本身，元数据都是很好的摘要方法。特别是在大模型时代，元数据可以帮助 AI 建立对于数据的完整认识，所以是不可忽视的。
由于 RAG 的重点是搜索，所以数据工程的目标也要围绕搜索来，这是非常科学的思路。数据工程要严格为下游需求服务，不能自己编需求。
搜索工程
这是我比较不熟悉的领域。之前只见过一些顾问和社区伙伴在做这方面工作，还是第一次接触到完整的工程思路。
我觉得这里最大的亮点就是把不同的检索策略作为一种 “Skill”理解，把每个检索的 Skill 充分独立地封装，以方便给 Agent 使用。这是大模型时代的搜索工程和之前很大的不同，Agent 提供了很好的智能选择和排列组合能力。
另外一个重点是最大限度地用空间换时间。通过数据挖掘把检索需要的维度尽可能提前挖掘并且存储，就可以在搜索的时候减少工作量提高准确度。大概可以理解为多刷题多存题。
作者本人总结，“RAG 是大型上下文工程”。这里的大型就体现在“数据挖掘”提前准备大量数据备用。
智能体工程
作者强调“清晰描述 Skill”，我对于这个提示词工程的思想表示赞同。因为对于大模型来说，学会了新知识就很大程度上意味着它可以判断如何排列组合了。大模型在直接找精确信息是薄弱的，但是在判断什么工具可能有效的模糊性问题是擅长的，这和大模型擅长寻找和理解模式有关。
可以看出来作者在探索更复杂的场景如何组合与优化智能体。如果是我来设计，我会考虑如何吸收一线用户的搜索反馈来迭代智能体的上下文工程。
知识工程
文章中没有提到，但是实际上这是作者最近的主要工作之一。现代知识工程是关于如何构建、维护和使用知识图谱的。
在搜索工程部分提到的基于图的存储和检索，就和知识工程有关。知识工程最难的工作就是如何在事前解决数据不一致的问题，也就是“融合”知识图谱。
这个工作的主要目的同样是把搜索时可能遇到的困难前置到构建知识库的环节，特别是对于提高生产级应用提高关键实体信息的准确度非常有用。
小结
顶尖的架构设计思想。学习。

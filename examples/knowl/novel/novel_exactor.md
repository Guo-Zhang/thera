# 小说知识抽取器

我来针对这篇短篇小说《赏雪谈心》做一个**知识图谱提取的完整示范**，展示从文本到结构化知识的建模过程。

---

## 一、文本分析：核心要素识别

### 1. 实体抽取（Nodes）

| 实体类型 | 实例 | 属性 |
|---------|------|------|
| **人物** | 他（男主人公） | 性格：细腻、体贴、有洞察力；情感状态：心疼、爱慕 |
| | 她（女主人公） | 性格：敏感、压抑、完美主义；情感状态：孤独、被理解后的触动 |
| **地点** | 雪中户外 | 氛围：安静、纯净、情感催化剂 |
| **物件** | 雪花 | 象征：纯净、易逝、情感媒介 |
| | 纸巾 | 功能：关怀的具象化 |
| **隐喻实体** | "仓库" | 象征：内心世界的孤独与承载 |
| | "瓶瓶罐罐" | 象征：收集他人故事却填不满的空虚 |

### 2. 关系抽取（Edges）

```
[他] --爱慕/心疼--> [她]
[他] --理解/洞察--> [她]（"你这么会开导人，想来心里存了很多心事"）
[她] --依赖/渴望--> [他]（想抓住他的手）
[她] --压抑/防御--> [自我]（"被自己的想法羞到了"）
[雪花] --触发--> [情感暴露]（雪天打开仓库）
[纸巾] --传递--> [温度/关怀]
[朋友圈照片] --缘起--> [关系开端]
```

### 3. 事件链（时序）

| 阶段 | 事件 | 情感转折 |
|-----|------|---------|
| 触发 | 赏雪接雪 | 她"心里泛酸"（压抑的忧伤）|
| 深入 | 仓库隐喻对话 | 她点头承认，建立信任 |
| 暴露 | 他点破她"会开导人" | 她"水光流转"，防线松动 |
| 关键 | 他的故事"弥漫整个仓库" | 她首次感到被真正看见 |
| 回溯 | 回忆初见（朋友圈） | 揭示他长久的心疼与关注 |
| 高潮 | 他为她擦泪 | 身体接触，情感突破 |
| 暧昧 | 注意到脸红，不敢靠近 | 双向情愫，但仍有距离 |

---

## 二、知识建模：针对这篇小说的Schema设计

### 核心洞察：这是一篇**情感张力型**文本

不同于情节驱动的小说，本文的核心是**心理流动**和**隐喻系统**。因此知识建模需要：

#### 1. 情感状态机（State Machine）
```
孤独压抑 → 被触动 → 信任暴露 → 渴望亲密 → 羞涩回避
```

#### 2. 隐喻-现实映射层
| 隐喻 | 现实含义 | 功能 |
|-----|---------|------|
| 仓库 | 内心世界 | 孤独感的空间化 |
| 瓶瓶罐罐 | 他人故事/社会期待 | 完美主义的负担 |
| 弥漫 | 他的存在方式 | 区别于"收藏"的占有，是"充满"的陪伴 |
| 雪花 | 当下时刻 | 易逝但纯净，促成坦诚 |

#### 3. 未言明关系（Subtext）
- **权力动态**：他是"观察者"（从朋友圈关注），她是"被观察者"，但对话中他暴露脆弱，平衡了关系
- **拯救叙事的风险**：他"心疼"她"优秀却累"，隐含对"完美受害者"的凝视，但她以"弥漫"重新定义了关系——不是被拯救，而是被充满

---

## 三、图谱可视化（文本描述）

```
                    [雪花/场景]
                         |
                         v
[他:观察者/心疼者] ←——情感流动——→ [她:被观察者/孤独者]
       |                                   |
       |———"你的故事弥漫整个仓库"———————→|  [理解/被看见]
       |                                   |
       |←————————"想抓住他的手"——————————|  [渴望/羞怯]
       |                                   |
    [纸巾/温度] ———身体接触突破——→ [脸红/心动]
       |                                   |
       |———"不敢再靠近"——————————————→|  [暧昧/保留]
       
[朋友圈照片] ——时间回溯——→ [初见的惊艳]
```

---

## 四、提取技术针对本文的优化

### 难点处理

| 难点 | 方案 |
|-----|------|
| 无姓名，只有"他/她" | 共指消解+角色功能标注（主动方/被动方）|
| 大量隐喻 | 建立隐喻识别层，单独建"隐喻实体"类型 |
| 情感细腻变化 | 细粒度情感标签（泛酸→水光→脸红）|
| 对话推动情节 | 对话轮次分析，提取"提问-回应-深化"模式 |

### 关键抽取规则示例

```python
# 隐喻识别模式
if "像" in sentence and ("心里" or "感觉") in context:
    mark_as_metaphor(entity, confidence=0.9)

# 情感转折信号
emotion_markers = {
    "泛酸": "压抑的忧伤",
    "水光流转": "感动/防线松动", 
    "脸红": "心动/羞涩",
    "不敢靠近": "渴望但克制"
}

# 身体接触的情感权重
if "擦" in action and "眼泪" in object:
    relation_type = "亲密突破"
    intensity = 0.85  # 高情感强度
```

---

## 五、可扩展的查询示例

基于这个图谱，可以回答：

1. **情感路径**："她"从孤独到心动的完整状态转换？
2. **隐喻网络**："仓库"隐喻如何贯穿全文并变化？
3. **权力分析**：男女主人公在对话中的主动权如何转移？
4. **缺失信息**：他为何"不敢再靠近"？（需结合前文或后续推断）

---

这篇文本特别适合做**情感计算**和**隐喻理解**的研究样本——表面是简单的雪景对话，实际构建了完整的"被看见"的心理动力学模型。如果要继续深入，可以对比分析"仓库"隐喻在其他文学作品中的变体（如伍尔夫的"房间"、张爱玲的"绣在屏风上的鸟"）。
